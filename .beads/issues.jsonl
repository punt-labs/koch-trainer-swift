{"id":"koch-trainer-swift-0tu","title":"Add caching to GitHub Actions CI workflow","description":"## Problem\n\nCI runs are slow due to reinstalling tools and rebuilding from scratch each time.\n\n## Current bottlenecks\n\n1. `brew install xcodegen` (~30-60s per run)\n2. `brew install swiftlint` (~20-40s per run)\n3. DerivedData rebuild (varies)\n\n## Proposed solution\n\nAdd GitHub Actions caching for:\n\n1. **Homebrew packages** - Cache xcodegen and swiftlint installations\n2. **DerivedData** - Cache Xcode build artifacts with hash-based invalidation\n\n## Implementation notes\n\n- Use `actions/cache@v4`\n- Key Homebrew cache on tool versions\n- Key DerivedData on Swift file hashes + project.yml\n- Consider merging lint + build jobs to eliminate duplicate checkout/setup\n\n## Affected files\n\n- `.github/workflows/ci.yml`","status":"closed","priority":3,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-21T06:12:45.442313-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-21T07:58:49.312143-08:00","closed_at":"2026-01-21T07:58:49.312143-08:00","close_reason":"Implemented in PR #6 - added Homebrew and DerivedData caching to CI workflow"}
{"id":"koch-trainer-swift-2h5","title":"MorseDecoderTests: malformed input, edge cases","status":"closed","priority":3,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-21T04:32:14.51361-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-22T04:32:19.046192-08:00","closed_at":"2026-01-22T04:32:19.046192-08:00","close_reason":"Tests added in PR #16"}
{"id":"koch-trainer-swift-5ge","title":"Test VoiceOver navigation flow on physical device","status":"open","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-21T04:32:00.613665-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-21T04:32:00.613665-08:00","dependencies":[{"issue_id":"koch-trainer-swift-5ge","depends_on_id":"koch-trainer-swift-mfr","type":"blocks","created_at":"2026-01-21T04:33:46.055321-08:00","created_by":"\"jmf-pobox\""}]}
{"id":"koch-trainer-swift-5mw","title":"Replace sine wave QSB with filtered random noise","description":"## Context\nCurrent QSB uses deterministic sine wave modulation. Real ionospheric fading (QSB) has irregular, quasi-random character. Morse Runner uses filtered random noise for more realistic fading.\n\n## Implementation\nReplace sinusoidal fading with multi-pass averaged random noise:\n\n1. Generate random value each buffer block (not each sample)\n2. Apply 3-pass moving average filter for smoothing\n3. Use filtered value as gain multiplier\n4. Interpolate gain between blocks to avoid clicks\n\n```swift\n// Conceptual approach (Morse Runner style)\nlet randomValue = Float.random(in: 0...1)\nlet filteredValue = filter.process(randomValue)  // 3-pass average\nlet gain = 1.0 - fadingDepth * filteredValue\n// Interpolate from previous gain to new gain across block\n```\n\nFilter bandwidth controls fading rate (faster filter = faster fading).\n\n## Files\n- KochTrainer/Services/AudioEngine/BandConditionsProcessor.swift\n\n## Acceptance\n- QSB fading is irregular/realistic, not predictable sine wave\n- fadingRate setting controls fading speed\n- fadingDepth setting controls fading intensity\n- No audio clicks during gain transitions","status":"open","priority":3,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-22T06:16:21.479896-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-22T06:16:21.479896-08:00"}
{"id":"koch-trainer-swift-653","title":"Study Morse Runner's audio processing approach","status":"closed","priority":3,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-21T04:31:47.078948-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-22T06:15:58.997468-08:00","closed_at":"2026-01-22T06:15:58.997468-08:00","close_reason":"Research complete - see PR #17 discussion or session notes for findings"}
{"id":"koch-trainer-swift-69q","title":"QSOEngineTests: phase transitions, processUserInput all phases","status":"closed","priority":3,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-21T04:32:14.407265-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-22T04:32:19.045028-08:00","closed_at":"2026-01-22T04:32:19.045028-08:00","close_reason":"Tests added in PR #16"}
{"id":"koch-trainer-swift-7cy","title":"Research HF band recordings for realistic audio reference","status":"closed","priority":3,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-21T04:31:46.845843-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-22T06:15:58.97415-08:00","closed_at":"2026-01-22T06:15:58.97415-08:00","close_reason":"Research complete - see PR #17 discussion or session notes for findings"}
{"id":"koch-trainer-swift-819","title":"Create AppSettingsTests: clamping logic, Codable migration, defaults","status":"closed","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-21T04:32:14.299495-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-21T19:47:47.620054-08:00","closed_at":"2026-01-21T19:47:47.620054-08:00","close_reason":"Closed"}
{"id":"koch-trainer-swift-82u","title":"Create MorseAudioEngineTests: playCharacter, playGroup, stop, config","status":"closed","priority":3,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-21T04:32:14.618865-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-22T04:32:19.04696-08:00","closed_at":"2026-01-22T04:32:19.04696-08:00","close_reason":"Tests added in PR #16"}
{"id":"koch-trainer-swift-8vl","title":"Vocabulary receive: auto-submit after expected character count instead of requiring Enter","description":"Current: User must press Enter to submit answer in Vocabulary receive training.\n\nExpected: System should auto-submit when user has typed the expected number of characters (matching the word/phrase length sent via Morse), or on timeout if fewer characters received.\n\nThis matches the behavior of single-character Learn mode and improves UX flow.","status":"closed","priority":2,"issue_type":"bug","owner":"jmf@pobox.com","created_at":"2026-01-21T04:58:50.097748-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-21T15:17:15.160758-08:00","closed_at":"2026-01-21T15:17:15.160758-08:00","close_reason":"Closed"}
{"id":"koch-trainer-swift-965","title":"Add accessibilityIdentifier to testable UI elements","description":"Add stable accessibilityIdentifier values to key UI elements before expanding UI test coverage. This ensures tests work after localization.\n\nElements to identify:\n- Training start buttons (receive, send, ear training)\n- Navigation elements\n- Phase-specific views (intro, training, paused, completed)\n- Feedback indicators (correct/incorrect)\n- Progress displays\n\nPattern: use kebab-case identifiers like 'receive-training-start-button'\n\nBlocks: Expanded UI test coverage\nRationale: Tests using text labels will break when app is localized","status":"closed","priority":3,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-22T06:36:29.353962-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-22T09:24:51.408193-08:00","closed_at":"2026-01-22T09:24:51.408193-08:00","close_reason":"PR #21 adds accessibility identifiers to all key UI elements"}
{"id":"koch-trainer-swift-9mb","title":"Implement training feedback announcements for VoiceOver","status":"open","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-21T04:32:00.504528-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-22T05:50:03.909159-08:00"}
{"id":"koch-trainer-swift-bzx","title":"VocabularyTrainingViewModelTests: expand send mode paths, timer, word completion","status":"closed","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-21T04:32:13.956378-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-21T19:43:31.975011-08:00","closed_at":"2026-01-21T19:43:31.975011-08:00","close_reason":"Added tests covering all specified areas"}
{"id":"koch-trainer-swift-cem","title":"Epic: Accessibility Compliance","description":"Full VoiceOver support, Dynamic Type, logical navigation order. Critical for Morse code's historical significance to visually impaired users.","status":"open","priority":2,"issue_type":"feature","owner":"jmf@pobox.com","created_at":"2026-01-21T04:30:43.223221-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-21T04:30:43.223221-08:00"}
{"id":"koch-trainer-swift-cm6","title":"Add schema version number to persisted data","description":"Store a version number (e.g., schemaVersion: 1) with StudentProgress. Increment on breaking changes. Enables version-specific migration logic.","status":"closed","priority":1,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-21T05:03:25.864922-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-21T10:01:34.103444-08:00","closed_at":"2026-01-21T10:01:34.103444-08:00","close_reason":"Added schemaVersion to StudentProgress with migration support"}
{"id":"koch-trainer-swift-eho","title":"StudentProgressTests: computed properties, word stats merging, session history","status":"closed","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-21T04:32:14.190028-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-21T19:43:31.963486-08:00","closed_at":"2026-01-21T19:43:31.963486-08:00","close_reason":"Added tests covering all specified areas"}
{"id":"koch-trainer-swift-ex7","title":"Evaluate view testing approach: ViewInspector vs snapshot vs UI tests","description":"Must decide testing strategy before writing 12+ view test files. ViewInspector allows unit-style testing, snapshots catch visual regressions, UI tests are integration-level.","status":"closed","priority":3,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-21T04:32:20.700281-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-22T06:21:09.478726-08:00","closed_at":"2026-01-22T06:21:09.478726-08:00","close_reason":"Evaluated view testing approaches. Recommendation: exclude Views from coverage target (achieve 90%+ on Models/ViewModels/Services), add XCUITest target for 5-10 critical flows as integration tests. Also fixed slow unit tests (109s -\u003e 33s) by adding SilentAudioEngine and configurable AI response delay."}
{"id":"koch-trainer-swift-g1g","title":"SendTrainingViewModelTests: pattern building, character decoding, timeout","status":"closed","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-21T04:32:14.080257-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-21T19:43:31.985779-08:00","closed_at":"2026-01-21T19:43:31.985779-08:00","close_reason":"Added tests covering all specified areas"}
{"id":"koch-trainer-swift-i97","title":"Create migration tests with sample data from each app version","description":"Export sample StudentProgress JSON from current version. Create tests that load this data after schema changes to verify migration works.","status":"open","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-21T05:03:26.249815-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-21T05:03:26.249815-08:00"}
{"id":"koch-trainer-swift-j3i","title":"Hide AI text from VoiceOver when copy-by-ear mode enabled","description":"QSO text currently uses visual opacity only. Need accessibilityHidden modifier so VoiceOver doesn't read hidden text.","status":"open","priority":2,"issue_type":"bug","owner":"jmf@pobox.com","created_at":"2026-01-21T04:32:00.827036-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-21T04:32:00.827036-08:00"}
{"id":"koch-trainer-swift-jto","title":"Epic: Test Coverage 90%+ (excluding Views)","description":"Target 90%+ coverage on testable code (Models, ViewModels, Services). Views excluded from coverage target - tested via XCUITest integration tests instead. Current non-View coverage: ~88%. Current test count: 889 tests, 33s runtime.","status":"open","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-21T04:30:47.549568-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-22T06:23:40.005118-08:00","dependencies":[{"issue_id":"koch-trainer-swift-jto","depends_on_id":"koch-trainer-swift-ex7","type":"blocks","created_at":"2026-01-22T05:43:20.212296-08:00","created_by":"\"jmf-pobox\""}]}
{"id":"koch-trainer-swift-mfr","title":"Audit all views for accessibility labels","status":"open","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-21T04:32:00.27417-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-21T04:32:00.27417-08:00"}
{"id":"koch-trainer-swift-p3h","title":"Notification quiet hours and preferred time should follow user's current timezone","description":"Current behavior: Quiet hours and preferred notification time stored as absolute Date, not relative to user's current timezone.\n\nProblem: Users who travel across timezones get notifications at unexpected local times.\n\nExpected: Settings should represent local time in whatever timezone the user is currently in.\n\nFix:\n- Change preferredReminderTime from Date to hour/minute Int components\n- Evaluate against Calendar.current at notification scheduling time\n- No migration needed (single-user app pre-release)\n\nAffected files:\n- NotificationSettings.swift\n- NotificationManager.swift  \n- SettingsView.swift (time pickers)","status":"closed","priority":2,"issue_type":"bug","owner":"jmf@pobox.com","created_at":"2026-01-21T05:05:05.250951-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-21T06:50:48.945474-08:00","closed_at":"2026-01-21T06:50:48.945474-08:00","close_reason":"Fixed in PR #4 - notification time now stored as hour/minute integers instead of Date"}
{"id":"koch-trainer-swift-pww","title":"Replace white noise with pink noise filter for QRN","description":"## Context\nResearch shows atmospheric noise follows 1/f (pink) spectral characteristics, not white noise.\n\n## Implementation\nUse Paul Kellet's economy filter in BandConditionsProcessor.addNoise():\n\n```swift\n// State variables (persist between samples)\nprivate var pinkB0: Float = 0\nprivate var pinkB1: Float = 0\nprivate var pinkB2: Float = 0\n\n// Per sample generation\nlet white = Float.random(in: -1...1)\npinkB0 = 0.99765 * pinkB0 + white * 0.0990460\npinkB1 = 0.96300 * pinkB1 + white * 0.2965164\npinkB2 = 0.57000 * pinkB2 + white * 1.0526913\nlet pink = pinkB0 + pinkB1 + pinkB2 + white * 0.1848\n```\n\nAccuracy: Â±0.5dB across audible range.\n\n## Files\n- KochTrainer/Services/AudioEngine/BandConditionsProcessor.swift\n\n## Acceptance\n- Base QRN noise uses pink spectrum instead of white\n- Static crashes remain unchanged\n- Existing tests pass","status":"closed","priority":3,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-22T06:16:11.6965-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-22T06:42:20.156625-08:00","closed_at":"2026-01-22T06:42:20.156625-08:00","close_reason":"Implemented in PR #18"}
{"id":"koch-trainer-swift-qc3","title":"Support Dynamic Type in custom views","status":"open","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-21T04:32:00.720761-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-21T04:32:00.720761-08:00"}
{"id":"koch-trainer-swift-qde","title":"Implement graceful degradation on partial decode failure","description":"If nested models (SessionResult, CharacterStat) fail to decode, preserve what we can instead of losing everything. Consider: decode session history separately, skip invalid entries.","status":"closed","priority":1,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-21T05:03:26.138926-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-21T10:01:34.293686-08:00","closed_at":"2026-01-21T10:01:34.293686-08:00","close_reason":"Added GracefulDecoder for graceful degradation on partial decode failure"}
{"id":"koch-trainer-swift-rte","title":"Epic: Data Migration Safety - Never Lose User Progress","description":"Critical: Current implementation silently loses ALL user data if Codable decoding fails for any reason.\n\nCurrent risks:\n1. ProgressStore.load() returns fresh StudentProgress() on decode failure\n2. No schema version tracking - can't apply version-specific migrations  \n3. No backup before migration attempt\n4. Nested model decode failures cascade to total data loss\n5. No tests for migration paths from old data formats\n\nRequirements:\n- Schema version number stored with data\n- Backup raw data before decode attempt\n- Graceful degradation: preserve what we can decode\n- Migration tests with sample data from each app version\n- Never return empty progress if any data exists","status":"closed","priority":1,"issue_type":"feature","owner":"jmf@pobox.com","created_at":"2026-01-21T05:03:01.938219-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-21T10:01:53.139537-08:00","closed_at":"2026-01-21T10:01:53.139537-08:00","close_reason":"Implemented core data migration safety: schema versioning, rolling backups, graceful degradation. Remaining items (migration tests, recovery UI) tracked separately."}
{"id":"koch-trainer-swift-sdq","title":"StreakCalculatorTests: timezone boundaries, DST edge cases","status":"closed","priority":3,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-21T04:32:14.723903-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-22T05:25:03.337477-08:00","closed_at":"2026-01-22T05:25:03.337477-08:00","close_reason":"Merged PR #15"}
{"id":"koch-trainer-swift-t7l","title":"Add data recovery UI in Settings for corrupt data","description":"If decode fails but backup exists, show option in Settings to: view error details, export raw data, attempt recovery, or reset with acknowledgment.","status":"open","priority":3,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-21T05:03:26.359487-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-21T05:03:26.359487-08:00"}
{"id":"koch-trainer-swift-ucc","title":"Add band conditions audio preview in Settings","description":"## Context\nUsers cannot easily compare band condition settings without starting a training session. A preview button would help tuning.\n\n## Implementation\nAdd \"Preview\" button in Settings \u003e Band Conditions section that plays:\n- 3 seconds of tone with current QRN/QSB/QRM settings applied\n- Uses same BandConditionsProcessor as training\n\n## Files\n- KochTrainer/Views/Settings/SettingsView.swift (or new BandConditionsSettingsView)\n- May need minor MorseAudioEngine changes for standalone preview\n\n## Acceptance\n- Preview button plays sample tone with band conditions\n- Settings changes reflect immediately in next preview\n- Audio stops cleanly when navigating away","status":"open","priority":4,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-22T06:16:30.055159-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-22T06:16:30.055159-08:00"}
{"id":"koch-trainer-swift-v0x","title":"Add accessibilityLabel to image-only buttons","status":"open","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-21T04:32:00.391904-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-21T04:32:00.391904-08:00","dependencies":[{"issue_id":"koch-trainer-swift-v0x","depends_on_id":"koch-trainer-swift-mfr","type":"blocks","created_at":"2026-01-21T04:33:46.165276-08:00","created_by":"\"jmf-pobox\""}]}
{"id":"koch-trainer-swift-vh1","title":"Epic: Band Conditions Audio Tuning","status":"open","priority":3,"issue_type":"feature","owner":"jmf@pobox.com","created_at":"2026-01-21T04:30:37.725634-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-21T04:30:37.725634-08:00"}
{"id":"koch-trainer-swift-xqb","title":"Epic: Ear Training Mode","description":"New training mode focused on pattern recognition without character knowledge.\n\n**UX Flow:**\n- User hears Morse audio for a character (single play, no replay)\n- User taps dit/dah buttons to reproduce the pattern\n- Visual feedback shows pattern comparison (e.g., '.- correct!' or '.- vs ..')\n\n**Progression:**\n- Levels by pattern length: Level 1 = 1-element (E,T), Level 2 = 2-element (A,I,M,N), etc.\n- Max level: 5 (5-element patterns)\n- Cumulative: higher levels include all shorter patterns\n- Advancement: 20 attempts + 90% accuracy (same as Receive/Send)\n\n**Tracking:**\n- Progress stored and displayed on UI (e.g., '3/5')\n- NOT used for notifications, streaks, or spaced repetition\n\n**Home Screen:**\n- New card placed ABOVE Receive and Send modes","status":"closed","priority":2,"issue_type":"feature","owner":"jmf@pobox.com","created_at":"2026-01-21T14:57:03.724719-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-21T15:37:30.075241-08:00","closed_at":"2026-01-21T15:37:30.075241-08:00","close_reason":"Ear training feature implemented and tested"}
{"id":"koch-trainer-swift-xzb","title":"Backup raw data before decode attempt in ProgressStore.load()","description":"Before attempting JSONDecoder.decode(), copy the raw Data to a backup key. If decode fails, raw data is preserved for recovery or debugging.","status":"closed","priority":1,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-21T05:03:25.997971-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-21T10:01:34.200403-08:00","closed_at":"2026-01-21T10:01:34.200403-08:00","close_reason":"Added BackupManager with rolling backups before every save"}
{"id":"koch-trainer-swift-yc6","title":"Investigate pink vs white noise for atmospheric simulation","status":"closed","priority":3,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-01-21T04:31:46.967039-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-01-22T06:15:58.987124-08:00","closed_at":"2026-01-22T06:15:58.987124-08:00","close_reason":"Research complete - see PR #17 discussion or session notes for findings"}
